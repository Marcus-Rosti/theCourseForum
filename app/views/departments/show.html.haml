%p#notice= notice
%p
  %h1= @department.name
%p
  - @subdepartments.each do |subdepartment|
    - if(@count > 1)
      %h2= subdepartment.name
    - flag = true
    - separator = 0
    - @courses.each do |course|
      - if(course.subdepartment_id == subdepartment.id)
        - if flag
          - separator = (course.course_number / 1000) * 1000 + 1000
          - flag = false
        - if course.course_number > separator && course.course_number < (separator + 1000)
          %br
          - separator += 1000
        - elsif course.course_number > separator
          - separator += 1000
        - p_list = course.professors_list
        - if p_list.size > 1
          = link_to subdepartment.mnemonic + " " + course.course_number.to_s + " " + course.title, course
        - elsif !p_list.empty?
          = link_to subdepartment.mnemonic + " " + course.course_number.to_s + " " + course.title, course_professors_path(:p => p_list.first.id, :c => course.id)
        %br
    %br
