- content_for :title, @department.name
%p#notice= notice
%h1= @department.name
.dept-list
  - @subdepartments_with_sections.each do |subdepartment|
    - if (@count > 1)
      %h2= subdepartment.name
    %ul.department-courses
      .row.row-no-margin
        .col-xs-6.centertext
          %strong Course
        .col-xs-4.centertext
          %strong Next Offered
        .col-xs-2.centertext
          %strong Last Offered
      - flag = true
      - separator = 0
      - @courses_with_sections.select{|c| c.subdepartment_id == subdepartment.id}.sort_by{|c| c.course_number}.each do |course|
        - if flag
          - separator = (course.course_number / 1000) * 1000 + 1000
          - flag = false
        - if course.course_number >= separator
          %br
          - separator = (course.course_number / 1000) * 1000 + 1000
        %li.row.course-row.row-no-margin{style: "padding-left:auto;text-indent:auto;min-height:0;"}
          .col-xs-6
            = link_to course.mnemonic_number + " " + course.title, course
          .col-xs-4.centertext
            - if @courses_taught_next_session_ids.include? course.id
              %span.label{:class => "label-#{@next_session.season.downcase}"}= @session_name
            - if @courses_taught_next_semester_ids.include? course.id
              %span.label{:class => "label-#{@next_semester.season.downcase}"}= @semester_name
          .col-xs-2.centertext
            - last_semester_taught = @courses_last_semester[course.id]
            - if last_semester_taught != nil
              - last_semester_taught = 
              %span.label{:class => "label-#{last_semester_taught.season.downcase}"}= "#{last_semester_taught.season} #{last_semester_taught.year}"

          -#
            .col-xs-6
              = link_to course.mnemonic_number + " " + course.title, course
            .col-xs-4.centertext
              - if @courses_taught_next_session_ids.include? course.id
                %span.label.label-orange= @session_name
              - if @courses_taught_next_semester_ids.include? course.id
                %span.label.label-primary= @semester_name
            .col-xs-2.centertext
              - last_semester_taught = @courses_last_semester[course.id]
              - if last_semester_taught != nil
                - last_semester_taught = 
                %span.label.label-danger= "#{last_semester_taught.season} #{last_semester_taught.year}"
        -# elsif number_of_professors == 1
          -# %li= link_to course.mnemonic_number + " " + course.title, course_professors_path(:p => @section_professor_mapping.select(|v| v[0] == professor_id, :c => course.id)
        - else
          - next